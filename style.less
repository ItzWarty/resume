@page_spacing: 1em;
@debug: false;
@force-print: false;
@line-height: 1.5em;
@fluid-block-spacing: 0.7em;
@thing-spacing: 1.10em;

.clearfix() {
  overflow: auto;
  zoom: 1;
}

a, a:visited {
   color: inherit;
   text-decoration: none;

   &when not (@force-print) {
      border-bottom: 1px dotted fade(black, 50%);
   }
   @media print {
      border-bottom: none;
   }
}

html {
   height: 100%;
   overflow-x: hidden;
}

body {
   background-color: gray;
   font-family: 'Courier New';
   padding: @page_spacing;

   display: flex;
   min-height: 100%;
   flex-wrap: wrap;
   flex-direction: row;
   align-items: center;
   justify-content: center;
   margin-top: -@page_spacing;
   margin-right: -@page_spacing;
}

.page {
   &:not(#debug_page) {
      display: flex;
   }
   flex-direction: column;
   justify-content: space-between;
   width: 8.5in;
   height: 11in;
   margin-top: @page_spacing;
   margin-right: @page_spacing;
   padding: 0.35in;
   color: #222222;
   background-color: white;
   overflow: hidden !important;

   .clearfix();
}

@media print {
   body {
      display: block;
      padding: 0 !important;
   }
   .page {
      margin: 0 !important;
      height: auto !important;
      min-height: 11in;
      color: inherit !important;
   }
}

.resume-block {
   &:not(:last-child) {
   }

   > h1 {
      font-size: 120%;
      font-family: Arial;
      padding-bottom: 0.05em;
      margin-bottom: 0.3em;
      border-bottom: 1px solid black;
   }

   > ul {
     .thing {
        font-size: 80%;

        &:not(:last-of-type) {
           margin-bottom: @thing-spacing;
        }

        > header {
           display: flex;
           font-family: 'Arial';
           white-space: nowrap;

           &when(@debug) { background-color: cyan; }

           h1 {
              order: 1;
              margin-bottom: 0.2em;
              font-weight: bold;
           }

         //   address, time, .role { font-weight: bold; }

           address {
              order: 3;
              &:before { font-style: normal; content: '\A0|\A0'; display: inline; }
           }

           time {
              order: 4;
              text-align: right;
              flex-grow: 1;
              &when(@debug) { background-color: magenta; }
           }

           .role {
              order: 2;
              flex-grow: 1 1 auto;
              font-weight: bold;
              &when(@debug) { background-color: red; }
              &:before { font-style: normal; content: '\A0:\A0'; display: inline; }
           }
        }

        section {
           position: relative;
           font-family: "Calibri";
           line-height: @line-height;

           > p, > ul {
              clear: both; padding-left: 2.0em; padding-right: 0.5em;

              .single-line { display: block !important; }
              span { white-space: nowrap; }
           }

           > ul {
             display: block;

             > li {
                display: flex;

                &:before {
                   display: block;
                   width: 0px;
                   margin-left: -1.0em;
                   padding-right: 1.0em;
                   content: '\25AA'
                }

                > h2 {
                   font-family: "Verdana";
                   font-size: 8pt;
                   font-style: italic;
                   white-space: nowrap;
                   flex: 1 1 auto;
                   &:after {
                      display: inline;
                      content: "\00a0";
                   }
                }
                > p {
                   flex: 1000;
                }
             }
           }

           .hack-right {
             position: absolute;
             top: 0;
             right: 0;
           }
        }
     }
   }
}

.lead-in {
   &when(@debug) { background-color: red; }
   display: flex;

   .qr-code {
      &when(@debug) { background-color: darkorange; }

      float: right;
      order: 2;
      box-sizing: border-box;
      width: 48px; height: 48px; margin-left: 0.2em;
      background-image: url("assets/miyu.github.io_resume_qr.png");
      background-size: contain;

      &when not (@force-print) {
         @media not print { display: none; }
      }
   }

   .contents {
      &when(@debug) { background-color: orange; }

      flex: 1;

      h1 {
         &when(@debug) { background-color: yellow; }

         margin-top: -0.12em; // accounts for top spacing of name header
         display: block;
         font-family: 'Arial';
         font-size: 200%;
      }

      nav {
         font-family: 'Georgia';
         line-height: 1em;

         a { white-space: nowrap; }
         a:not(:last-of-type) { margin-right: 0.3em; }
         a.icon:before {
            content:"\a0";
            display: inline-block; width: 1em; height: 1em; margin-right: 0.1em;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
         }

         a.github:before { background-image: url("assets/gh-favicon.ico"); }
         a.email:before { background-image: url("assets/email.gif"); }
         a.linkedin:before { background-image: url("assets/linkedin-logo.png"); }
         a.phone:before { background-image: url("assets/phone-icon.jpg"); }
      }
   }
}

@media only screen and (max-width : 9.7in) and (min-width : 8.7in) {
   body {
      // &when (@debug) { background-color: lime !important; }
      // display: block !important;
      // padding: 0 !important;
      // text-align: center;
      padding-left: 0 !important;
      padding-right: 0 !important;
      margin-right: 0 !important;
   }
   .page {
      margin-right: 0 !important;
      text-align: left;
   }
}

@media only screen and (max-width : 8.7in) {
   body {
      background-color: white !important;

      &when (@debug) { background-color: red !important; }

      display: block !important;
      padding: 0 !important;
      margin: 0 !important;
   }

   .lead-in nav {
      line-height: @line-height !important;
   }

   .page {
      display: block;

      padding: 0 0.3in !important;
      &:first-of-type { padding-top: 0.3in !important; }
      &:last-of-type { padding-bottom: 0.3in !important; }

      margin: 0;
      width: 100% !important;
      min-width: 280px !important;
      // width: auto !important;
      // min-width: 100%;
      height: inherit;
   }

   .resume-block {
      margin-bottom: @fluid-block-spacing;
   }

   .thing {
      &:not(:last-child) {
         margin-bottom: 1.5em !important;
      }
      header {
         display: inline !important;
         white-space: inherit !important;
         margin-bottom: 0.3em;
         line-height: @line-height;

         h1, address, time { display: inline; white-space: nowrap; }
         .role { display: inline !important; text-align: left !important; }
      }

      address {
         &::before {
            content: " at " !important;
         }

         &.online {
            background-color: red;
            display: none;
         }
      }
      time {
         &::before { content: "("; }
         &::after { content: ")"; }
      }
      .role {
         clear: left; font-weight: inherit !important;
         padding: 0.5em 0 0 0;
         &:before { content: "\0A" !important; white-space: pre; }
      }
      section {
         > ul {
            li:not(:last-of-type) { margin-bottom: 0.3em; }
         }

         li {
            display: block !important;
            &:before {
               position: absolute !important;
            }
            h2 {
               display: inline !important;
            }
         }

         .hack-right {
            position: static !important;
            float: none !important;
            display: block !important;
            padding-left: 2em;
         }
      }
   }
}

// Misc fixes for mozilla font rendering
@-moz-document url-prefix() {
   .thing {
      &:not(:last-of-type) {
         margin-bottom: 1.00em !important;
      }
   }
}
_:-ms-lang(x), _:-webkit-full-screen, body {
   .thing {
      &:not(:last-of-type) {
         margin-bottom: 1.10em !important;
      }
   }
}
